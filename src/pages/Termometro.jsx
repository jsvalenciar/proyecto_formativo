import React, { useState } from 'react';
import '../assets/css/monitor.css';

function Termometro() {
  const [datosGenerales, setDatosGenerales] = useState({ servicio: '', ubicacion: '', nombreEquipo: 'TERMOMETRO', marca: '', modelo: '', serie: '', activo: '', fechaMantenimiento: '', lugarMantenimiento: '', tipoMantenimiento: { preventivo: false, correctivo: false, predictivo: false } });
  const [observaciones, setObservaciones] = useState('');
  const [tablas, setTablas] = useState({
    fisicaInstalacion: [{ item: 'Condiciones ambientales', resultado: '' }, { item: 'Orden y Limpieza', resultado: '' }, { item: 'Estado físico', resultado: '' }, { item: 'Cubiertas', resultado: '' }, { item: 'Accesorios', resultado: '' }, { item: 'Etiquetas', resultado: '' }, { item: 'Guía', resultado: '' }, { item: 'Display', resultado: '' }, { item: 'Botones', resultado: '' }, { item: 'Conexiones', resultado: '' }, { item: 'Entrada', resultado: '' }],
    fuentePoder: [{ item: 'Cable de poder', resultado: '' }, { item: 'Receptáculo', resultado: '' }, { item: 'Fusibles', resultado: '' }, { item: 'Baterías', resultado: '' }, { item: 'Conectores', resultado: '' }, { item: 'Cargador', resultado: '' }, { item: 'Interior', resultado: '' }, { item: 'Puesta a tierra', resultado: '' }],
    interfazUsuario: [{ item: 'Display', resultado: '' }, { item: 'Pantalla táctil', resultado: '' }, { item: 'Perillas', resultado: '' }, { item: 'Teclado', resultado: '' }, { item: 'Indicadores', resultado: '' }, { item: 'Botones', resultado: '' }, { item: 'Conectores', resultado: '' }, { item: 'General', resultado: '' }],
    sistemaControl: [{ item: 'Tarjetas', resultado: '' }, { item: 'Componentes', resultado: '' }, { item: 'Soldaduras', resultado: '' }, { item: 'Fusibles', resultado: '' }, { item: 'Capacitores', resultado: '' }, { item: 'Transistores', resultado: '' }, { item: 'Diodos', resultado: '' }, { item: 'Circuitos', resultado: '' }],
    pruebasDesempeno: [{ item: 'Lectura', resultado: '' }, { item: 'Exactitud', resultado: '' }, { item: 'Respuesta', resultado: '' }, { item: 'Alarma', resultado: '' }, { item: 'Batería', resultado: '' }, { item: 'Software', resultado: '' }, { item: 'Hardware', resultado: '' }, { item: 'General', resultado: '' }]
  });
  const [firmas, setFirmas] = useState({ equipo1: { nombre: '', serial: '', certificado: '' }, equipo2: { nombre: '', serial: '', certificado: '' } });
  const [informeActividades, setInformeActividades] = useState('');

  const handleInputChange = (section, field, value) => {
    if (section === 'firmas') setFirmas(prev => ({ ...prev, [field]: value }));
    else setDatosGenerales(prev => ({ ...prev, [field]: value }));
  };
  const handleRadioChange = (table, index, value) => {
    setTablas(prev => ({ ...prev, [table]: prev[table].map((row, i) => i === index ? { ...row, resultado: value } : row) }));
  };
  const handleSubmit = () => console.log('Datos:', { datosGenerales, observaciones, tablas, firmas, informeActividades });

  return (
    <div className="formato">
      <header><div className="titulo"><h1>TERMOMETRO - MANTENIMIENTO</h1></div><div className="info-cabecera"><p>Versión: 1.0</p><p>Fecha: {new Date().toLocaleDateString()}</p></div></header>
      <section className="datos-generales"><h3>DATOS GENERALES</h3><div className="fila"><p><strong>Servicio:</strong> <input type="text" value={datosGenerales.servicio} onChange={(e) => handleInputChange('datosGenerales', 'servicio', e.target.value)} /></p><p><strong>Ubicación:</strong> <input type="text" value={datosGenerales.ubicacion} onChange={(e) => handleInputChange('datosGenerales', 'ubicacion', e.target.value)} /></p></div><div className="fila"><p><strong>Equipo:</strong> <input type="text" value={datosGenerales.nombreEquipo} onChange={(e) => handleInputChange('datosGenerales', 'nombreEquipo', e.target.value)} /></p><p><strong>Marca:</strong> <input type="text" value={datosGenerales.marca} onChange={(e) => handleInputChange('datosGenerales', 'marca', e.target.value)} /></p></div><div className="fila"><p><strong>Modelo:</strong> <input type="text" value={datosGenerales.modelo} onChange={(e) => handleInputChange('datosGenerales', 'modelo', e.target.value)} /></p><p><strong>Serie:</strong> <input type="text" value={datosGenerales.serie} onChange={(e) => handleInputChange('datosGenerales', 'serie', e.target.value)} /></p></div><div className="tipo-mantenimiento"><label><input type="checkbox" checked={datosGenerales.tipoMantenimiento.preventivo} onChange={(e) => setDatosGenerales(prev => ({ ...prev, tipoMantenimiento: { ...prev.tipoMantenimiento, preventivo: e.target.checked } }))} /> Preventivo</label><label><input type="checkbox" checked={datosGenerales.tipoMantenimiento.correctivo} onChange={(e) => setDatosGenerales(prev => ({ ...prev, tipoMantenimiento: { ...prev.tipoMantenimiento, correctivo: e.target.checked } }))} /> Correctivo</label></div></section>
      <section className="observaciones"><h3>OBSERVACIONES</h3><textarea value={observaciones} onChange={(e) => setObservaciones(e.target.value)}></textarea></section>
      <section className="tablas"><h3>INSPECCIÓN FÍSICA E INSTALACIÓN</h3><table><thead><tr><th>Item</th><th>AP</th><th>R</th><th>NA</th></tr></thead><tbody>{tablas.fisicaInstalacion.map((row, index) => (<tr key={index}><td>{row.item}</td><td><input type="radio" name={`f-${index}`} value="AP" checked={row.resultado === 'AP'} onChange={() => handleRadioChange('fisicaInstalacion', index, 'AP')} /></td><td><input type="radio" name={`f-${index}`} value="R" checked={row.resultado === 'R'} onChange={() => handleRadioChange('fisicaInstalacion', index, 'R')} /></td><td><input type="radio" name={`f-${index}`} value="NA" checked={row.resultado === 'NA'} onChange={() => handleRadioChange('fisicaInstalacion', index, 'NA')} /></td></tr>))}</tbody></table><h3>FUENTE DE PODER</h3><table><thead><tr><th>Item</th><th>AP</th><th>R</th><th>NA</th></tr></thead><tbody>{tablas.fuentePoder.map((row, index) => (<tr key={index}><td>{row.item}</td><td><input type="radio" name={`p-${index}`} value="AP" checked={row.resultado === 'AP'} onChange={() => handleRadioChange('fuentePoder', index, 'AP')} /></td><td><input type="radio" name={`p-${index}`} value="R" checked={row.resultado === 'R'} onChange={() => handleRadioChange('fuentePoder', index, 'R')} /></td><td><input type="radio" name={`p-${index}`} value="NA" checked={row.resultado === 'NA'} onChange={() => handleRadioChange('fuentePoder', index, 'NA')} /></td></tr>))}</tbody></table><h3>INTERFAZ DE USUARIO</h3><table><thead><tr><th>Item</th><th>AP</th><th>R</th><th>NA</th></tr></thead><tbody>{tablas.interfazUsuario.map((row, index) => (<tr key={index}><td>{row.item}</td><td><input type="radio" name={`u-${index}`} value="AP" checked={row.resultado === 'AP'} onChange={() => handleRadioChange('interfazUsuario', index, 'AP')} /></td><td><input type="radio" name={`u-${index}`} value="R" checked={row.resultado === 'R'} onChange={() => handleRadioChange('interfazUsuario', index, 'R')} /></td><td><input type="radio" name={`u-${index}`} value="NA" checked={row.resultado === 'NA'} onChange={() => handleRadioChange('interfazUsuario', index, 'NA')} /></td></tr>))}</tbody></table><h3>SISTEMA DE CONTROL</h3><table><thead><tr><th>Item</th><th>AP</th><th>R</th><th>NA</th></tr></thead><tbody>{tablas.sistemaControl.map((row, index) => (<tr key={index}><td>{row.item}</td><td><input type="radio" name={`c-${index}`} value="AP" checked={row.resultado === 'AP'} onChange={() => handleRadioChange('sistemaControl', index, 'AP')} /></td><td><input type="radio" name={`c-${index}`} value="R" checked={row.resultado === 'R'} onChange={() => handleRadioChange('sistemaControl', index, 'R')} /></td><td><input type="radio" name={`c-${index}`} value="NA" checked={row.resultado === 'NA'} onChange={() => handleRadioChange('sistemaControl', index, 'NA')} /></td></tr>))}</tbody></table><h3>PRUEBAS DE DESEMPEÑO</h3><table><thead><tr><th>Item</th><th>AP</th><th>R</th><th>NA</th></tr></thead><tbody>{tablas.pruebasDesempeno.map((row, index) => (<tr key={index}><td>{row.item}</td><td><input type="radio" name={`d-${index}`} value="AP" checked={row.resultado === 'AP'} onChange={() => handleRadioChange('pruebasDesempeno', index, 'AP')} /></td><td><input type="radio" name={`d-${index}`} value="R" checked={row.resultado === 'R'} onChange={() => handleRadioChange('pruebasDesempeno', index, 'R')} /></td><td><input type="radio" name={`d-${index}`} value="NA" checked={row.resultado === 'NA'} onChange={() => handleRadioChange('pruebasDesempeno', index, 'NA')} /></td></tr>))}</tbody></table></section>
      <section className="firmas"><h3>FIRMAS</h3><p>Equipo 1: <input type="text" value={firmas.equipo1.nombre} onChange={(e) => handleInputChange('firmas', 'equipo1', { ...firmas.equipo1, nombre: e.target.value })} /> Serial: <input type="text" value={firmas.equipo1.serial} onChange={(e) => handleInputChange('firmas', 'equipo1', { ...firmas.equipo1, serial: e.target.value })} /></p></section>
      <footer><h3>INFORME DE ACTIVIDADES</h3><textarea value={informeActividades} onChange={(e) => setInformeActividades(e.target.value)}></textarea></footer>
      <button className="submit-btn" onClick={handleSubmit}>Enviar</button>
    </div>
  );
}

export default Termometro;
